<!DOCTYPE html>
<html>
<head>

    <title>Utilizando LiveReload no Grunt</title>

    <!-- Meta -->
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Desenvolvedor Web" />

    <!-- Facebook -->
    <meta property="og:title" content="Utilizando LiveReload no Grunt"/>
    <meta property="og:site_name" content="Blog - Vitor Britto"/>
    <meta property="og:url" content="http://www.vitorbritto.com.br/blog/utilizando-livereload-no-grunt/"/>
    <meta property="og:image" content="http://www.vitorbritto.com.br/blog/assets/images/fb.jpg"/>
    <meta property="og:type" content="article"/>
    <meta property="og:description" content="Quando um novo projeto é iniciado, muitas alterações são realizadas durante a sua produção. Sendo assim, é preciso atualizar o navegador manualmente toda vez que estas alterações são feitas. Para evitar isso, temos um recurso muito interessante chamado Live Reload, que atualiza o browser automaticamente toda a vez que uma alteração no projeto é realizada."/>

    <link rel="shortcut icon" href="http://www.vitorbritto.com.br/blog/assets/images/favicon.png" type="image/x-icon">
    <link href="http://feeds.feedburner.com/vitorbritto" rel="alternate" type="application/rss+xml">
    <link href="http://fonts.googleapis.com/css?family=Lato:100,300,400,700" rel="stylesheet">
    <link href="http://www.vitorbritto.com.br/blog/assets/css/style.css" rel="stylesheet" id="theme-css"/>

</head>

<body>

    <div class="container">

        <div class="row">
            <header class="header">

                <div class="span4">
                    <div class="header-info">
                        <h1 class="header-name"><a href="http://www.vitorbritto.com.br/blog/">Vitor Britto</a></h1>
                        <h4 class="header-description">Desenvolvedor Web</h4>
                    </div>
                </div>

                <div class="span5">
                    <nav>
    <ul class="menu">
        <li class="menu-item"><a href="http://www.vitorbritto.com.br/blog/">Início</a></li>
        <li class="menu-item"><a href="http://www.vitorbritto.com.br/blog/about">Sobre</a></li>
        <li class="menu-item"><a href="http://www.vitorbritto.com.br/blog/projects">Projetos</a></li>
    </ul>
</nav>

                </div>

                <div class="span3">
                    <nav>
    <ul class="menu">
        <li class="menu-item">
            <a href="https://www.facebook.com/vbwebstudio" title="Facebook" target="_blank"><i class="icon-facebook"></i></a>
        </li>
        <li class="menu-item">
            <a href="https://twitter.com/vitorbritto" title="Twitter" target="_blank"><i class="icon-twitter"></i></a>
        </li>
        <li class="menu-item">
            <a href="https://github.com/vitorbritto" title="Github" target="_blank"><i class="icon-github"></i></a>
        </li>
        <li class="menu-item">
            <a href="mailto:contato@vitorbritto.com.br"><i class="icon-envelope-alt"></i></a>
        </li>
        <li class="menu-item">
            <a href="http://feeds.feedburner.com/vitorbritto" title="RSS Feed" target="_blank"><i class="icon-rss"></i></a>
        </li>
    </ul>
</nav>

                </div>

            </header>
        </div>

        <div class="line"></div>



<!-- Switch Theme -->
<div class="theme-wrapper">
    <p class="theme-text">Tema:</p>
    <span class="theme-btn light" id="theme-light"></span>
    <span class="theme-btn dark" id="theme-dark"></span>
</div>

    <div class="row">

        <article class="article">

            <img class="article-img" src="http://www.vitorbritto.com.br/blog/assets/images/posts/post-livereload.jpg">
            <h2 class="article-title">Utilizando LiveReload no Grunt</h2>
            <span class="article-date">Publicado em: 13/10/2013 | Por: Vitor Britto</span>
            <div class="line"></div>

            <section class="article-entry">
                <p>Saudações!</p>

<p>Quando um novo projeto é iniciado, muitas alterações são realizadas durante a sua produção. Sendo assim, é preciso atualizar o navegador manualmente toda vez que estas alterações são feitas. E convenhamos, ter de pressionar <code>cmd+r</code> (mac) ou <code>ctrl+r</code> (windows/linux) toda hora, é bem tedioso!</p>

<p>Para evitar isso, temos um recurso muito interessante chamado <a href="http://livereload.com/"><strong>LiveReload</strong></a>, que atualiza o browser automaticamente toda a vez que uma alteração no projeto é realizada.</p>

<p>Para quem utiliza o Grunt, existem dois <em>plugins</em> que possibilitam uma dinâmica de observação e carregamento das atualizações no projeto muito eficaz e prática. O alcance para este resultado é bem rápido.</p>

              <h3 id="Organizando-o-ambiente">
                <a name="Organizando-o-ambiente" href="#Organizando-o-ambiente"></a>Organizando o ambiente
              </h3>
            
<p>Para realizar os passos abaixo, o <a href="http://gruntjs.com/">Grunt</a> deve estar instalado na sua máquina, assim como o <code>package.json</code> e <code>Gruntfile.js</code> estarem configurados.</p>

<p>Confira o artigo sobre <a href="http://vitorbritto.com/blog/automacao-de-tarefas-com-gruntjs-parte-1/">Automação de tarefas com o Grunt</a> para saber mais a respeito.</p>

              <h3 id="Instalando-os-plugins">
                <a name="Instalando-os-plugins" href="#Instalando-os-plugins"></a>Instalando os plugins
              </h3>
            
<p>Com o ambiente preparado. Faça a instalação dos seguintes plugins:</p>

<ul>
<li><a href="https://npmjs.org/package/grunt-contrib-watch">grunt-contrib-watch</a>: <code>npm install grunt-contrib-watch --save-dev</code></li>
<li><a href="https://npmjs.org/package/grunt-contrib-connect">grunt-contrib-connect</a>: <code>npm install grunt-contrib-connect --save-dev</code></li>
</ul>

              <h3 id="Configurando-as-tarefas">
                <a name="Configurando-as-tarefas" href="#Configurando-as-tarefas"></a>Configurando as tarefas
              </h3>
            
<p>Antes de iniciar o exemplo prático para a configuração das tarefas, suponho que você esteja utilizando um pré-processador (o exemplo prático se dá com o Sass, mas fica a seu critério utilizar outro) e que suas tarefas para compilação, concatenação, minificação e <em>linting</em> estejam configuradas também.</p>

              <h5 id="Tarefa-<code>watch<-code>">
                <a name="Tarefa-<code>watch<-code>" href="#Tarefa-<code>watch<-code>"></a>Tarefa <code>watch</code>
              </h5>
            <div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><a name="line-1"></a><span class="nx">watch</span><span class="o">:</span> <span class="p">{</span>
<a name="line-2"></a>    <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
<a name="line-3"></a>        <span class="nx">livereload</span><span class="o">:</span> <span class="kc">true</span>
<a name="line-4"></a>    <span class="p">},</span>
<a name="line-5"></a>    <span class="nx">js</span><span class="o">:</span> <span class="p">{</span>
<a name="line-6"></a>        <span class="nx">files</span><span class="o">:</span> <span class="s2">&quot;js/*.js&quot;</span><span class="p">,</span>
<a name="line-7"></a>        <span class="nx">tasks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;uglify&quot;</span><span class="p">,</span> <span class="s2">&quot;jshint&quot;</span><span class="p">]</span>
<a name="line-8"></a>    <span class="p">},</span>
<a name="line-9"></a>    <span class="nx">sass</span><span class="o">:</span> <span class="p">{</span>
<a name="line-10"></a>        <span class="nx">files</span><span class="o">:</span> <span class="s2">&quot;sass/*.{scss,sass}&quot;</span><span class="p">,</span>
<a name="line-11"></a>        <span class="nx">tasks</span><span class="o">:</span> <span class="s2">&quot;sass&quot;</span>
<a name="line-12"></a>    <span class="p">},</span>
<a name="line-13"></a>    <span class="nx">html</span><span class="o">:</span> <span class="p">{</span>
<a name="line-14"></a>        <span class="nx">files</span><span class="o">:</span> <span class="s2">&quot;/*.html&quot;</span>
<a name="line-15"></a>    <span class="p">}</span>
<a name="line-16"></a><span class="p">}</span>
</code></pre></div>
<p>Onde:</p>

<ul>
<li>é necessário a opção <code>livereload</code> para que haja a comunicação com a tarefa <code>connect</code>;</li>
<li><code>files</code> vai passar uma <em>string</em> (ou <em>array</em>) com a lista de arquivos a serem executados;</li>
<li><code>tasks</code> vai passar uma <em>string</em> (ou <em>array</em>) com as tarefas a serem executas no objeto <code>files</code>.</li>
</ul>

<p><strong>Nota:</strong> perceba que estou utilizando um <em>globbing patterns</em> para as extensões dos arquivos pré-compilados. Significa que a compilação será executada independente da extensão do arquivo. Veja mais <a href="http://gruntjs.com/configuring-tasks#globbing-patterns">aqui</a>.</p>

              <h5 id="Tarefa-<code>connect<-code>">
                <a name="Tarefa-<code>connect<-code>" href="#Tarefa-<code>connect<-code>"></a>Tarefa <code>connect</code>
              </h5>
            <div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><a name="line-1"></a><span class="nx">connect</span><span class="o">:</span> <span class="p">{</span>
<a name="line-2"></a>    <span class="nx">server</span><span class="o">:</span> <span class="p">{</span>
<a name="line-3"></a>        <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
<a name="line-4"></a>            <span class="nx">port</span><span class="o">:</span> <span class="mi">9000</span><span class="p">,</span>
<a name="line-5"></a>            <span class="nx">base</span><span class="o">:</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span>
<a name="line-6"></a>            <span class="nx">hostname</span><span class="o">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
<a name="line-7"></a>            <span class="nx">livereload</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
<a name="line-8"></a>            <span class="nx">open</span><span class="o">:</span> <span class="kc">true</span>
<a name="line-9"></a>        <span class="p">}</span>
<a name="line-10"></a>    <span class="p">}</span>
<a name="line-11"></a><span class="p">}</span>
</code></pre></div>
<p>Onde:</p>

<ul>
<li><code>port</code> será a porta para iniciar o servidor;</li>
<li><code>base</code> será uma <em>string</em> (ou <em>array</em>) com o(s) diretório(s) raiz onde os arquivos serão exibidos;</li>
<li><code>hostaname</code> será o <em>host</em> que o servidor vai utilizar;</li>
<li><code>livereload</code> estabelece a comunicação com a tarefa <code>watch</code>;</li>
<li><code>open</code> habilita a execução do seu navegador padrão ao iniciar o servidor.</li>
</ul>

<p><strong>Nota:</strong> veja que o trunfo para a atualização automática no navegador está na comunicação entre a opção <code>livereload</code> (definidos como <code>true</code>) das duas tarefas.</p>

              <h3 id="Carregando-os-plugins">
                <a name="Carregando-os-plugins" href="#Carregando-os-plugins"></a>Carregando os plugins
              </h3>
            
<p>Agora que as suas tarefas estão configuradas, você precisa carregar os seus plugins no <code>Gruntfile</code>.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><a name="line-1"></a><span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-watch&#39;</span><span class="p">);</span>
<a name="line-2"></a><span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-connect&#39;</span><span class="p">);</span>
</code></pre></div>
<p><strong>Nota:</strong> você pode utilizar um plugin chamado <a href="https://github.com/sindresorhus/load-grunt-tasks">load-grunt-tasks</a> para fazer uma requisição de todos os seus plugins instalados e carregá-los automaticamente no seu <code>Gruntfile</code> de forma bem simples.</p>

              <h3 id="Registrando-as-tarefas">
                <a name="Registrando-as-tarefas" href="#Registrando-as-tarefas"></a>Registrando as tarefas
              </h3>
            
<p>Com as tarefas configuradas e os plugins carregados, basta configurar uma tarefa customizada.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><a name="line-1"></a><span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;connect&quot;</span><span class="p">,</span> <span class="s2">&quot;watch&quot;</span> <span class="p">]);</span>
</code></pre></div>
              <h3 id="Resultado-final">
                <a name="Resultado-final" href="#Resultado-final"></a>Resultado final
              </h3>
            <div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><a name="line-1"></a><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">grunt</span><span class="p">)</span> <span class="p">{</span>
<a name="line-2"></a>
<a name="line-3"></a>    <span class="s2">&quot;use strict&quot;</span>
<a name="line-4"></a>
<a name="line-5"></a>    <span class="c1">// Configuração das tarefas</span>
<a name="line-6"></a>    <span class="c1">// ---------------------------------------</span>
<a name="line-7"></a>    <span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
<a name="line-8"></a>
<a name="line-9"></a>        <span class="c1">// Tarefa watch</span>
<a name="line-10"></a>        <span class="nx">watch</span><span class="o">:</span> <span class="p">{</span>
<a name="line-11"></a>            <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
<a name="line-12"></a>                <span class="nx">livereload</span><span class="o">:</span> <span class="kc">true</span>
<a name="line-13"></a>            <span class="p">},</span>
<a name="line-14"></a>            <span class="nx">js</span><span class="o">:</span> <span class="p">{</span>
<a name="line-15"></a>                <span class="nx">files</span><span class="o">:</span> <span class="s2">&quot;js/*.js&quot;</span><span class="p">,</span>
<a name="line-16"></a>                <span class="nx">tasks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;uglify&quot;</span><span class="p">,</span> <span class="s2">&quot;jshint&quot;</span><span class="p">]</span>
<a name="line-17"></a>            <span class="p">},</span>
<a name="line-18"></a>            <span class="nx">sass</span><span class="o">:</span> <span class="p">{</span>
<a name="line-19"></a>                <span class="nx">files</span><span class="o">:</span> <span class="s2">&quot;sass/*.{scss,sass}&quot;</span><span class="p">,</span>
<a name="line-20"></a>                <span class="nx">tasks</span><span class="o">:</span> <span class="s2">&quot;sass&quot;</span>
<a name="line-21"></a>            <span class="p">},</span>
<a name="line-22"></a>            <span class="nx">html</span><span class="o">:</span> <span class="p">{</span>
<a name="line-23"></a>                <span class="nx">files</span><span class="o">:</span> <span class="s2">&quot;/*.html&quot;</span>
<a name="line-24"></a>            <span class="p">}</span>
<a name="line-25"></a>        <span class="p">},</span>
<a name="line-26"></a>
<a name="line-27"></a>        <span class="c1">// Tarefa connect</span>
<a name="line-28"></a>        <span class="nx">connect</span><span class="o">:</span> <span class="p">{</span>
<a name="line-29"></a>            <span class="nx">server</span><span class="o">:</span> <span class="p">{</span>
<a name="line-30"></a>                <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
<a name="line-31"></a>                    <span class="nx">port</span><span class="o">:</span> <span class="mi">9000</span><span class="p">,</span>
<a name="line-32"></a>                    <span class="nx">base</span><span class="o">:</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span>
<a name="line-33"></a>                    <span class="nx">hostname</span><span class="o">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
<a name="line-34"></a>                    <span class="nx">livereload</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
<a name="line-35"></a>                    <span class="nx">open</span><span class="o">:</span> <span class="kc">true</span>
<a name="line-36"></a>                <span class="p">}</span>
<a name="line-37"></a>            <span class="p">}</span>
<a name="line-38"></a>        <span class="p">}</span>
<a name="line-39"></a>
<a name="line-40"></a>    <span class="p">});</span>
<a name="line-41"></a>
<a name="line-42"></a>
<a name="line-43"></a>    <span class="c1">// Carregando os plugins</span>
<a name="line-44"></a>    <span class="c1">// ---------------------------------------</span>
<a name="line-45"></a>    <span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-watch&#39;</span><span class="p">);</span>
<a name="line-46"></a>    <span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-connect&#39;</span><span class="p">);</span>
<a name="line-47"></a>
<a name="line-48"></a>
<a name="line-49"></a>    <span class="c1">// Registrando a tarefa customizada</span>
<a name="line-50"></a>    <span class="c1">// ---------------------------------------</span>
<a name="line-51"></a>    <span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;connect&quot;</span><span class="p">,</span> <span class="s2">&quot;watch&quot;</span> <span class="p">]);</span>
<a name="line-52"></a>
<a name="line-53"></a><span class="p">};</span>
</code></pre></div>
<p>O código completo encontra-se neste <a href="https://gist.github.com/vitorbritto/6995472">Gists</a></p>

<p>Agora, é só adequar às suas necessidades. Até a próxima! =]</p>

            </section>

        </article>

        <section class="box">
    <div class="span3">
        <img class="box-thumb" src="http://www.vitorbritto.com.br/blog/assets/images/avatar.jpg">
    </div>
    <div class="span9">
        <section class="box-details">
            <h3>Vitor Britto</h3>
            <p> Full Stack Web Developer, extremamente apaixonado pelo seu trabalho (e Unix). Descobriu o mundo dos códigos há quase duas decádas e mantém a mesma paixão desde o primeiro dia dessa descoberta. Trabalha como freelancer full time há quase 4 anos desenvolvendo projetos voltados para a web. Também direciona boa parte do seu tempo para pesquisas, desenvolvimento de projetos open-source e escrever os artigos aqui publicados.</p>
        </section>
    </div>
</section>

        <div class="box">
    <div class="newsletter-wrapper">
    <form action="http://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('http://feedburner.google.com/fb/a/mailverify?uri=vitorbritto', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
        <h3 class="newsletter-title">Receba os artigos no seu e-mail</h3>
        <p class="newsletter-text">Inscreva-se na minha newsletter para receber notificações de novos artigos no seu e-mail.</p>
        <input class="input" type="email" name="email" placeholder="Digite o seu email"/>
        <input type="hidden" value="vitorbritto" name="uri"/>
        <input type="hidden" name="loc" value="en_US"/>
        <input class="btn-newsletter" type="submit" value="Assinar Newsletter" />
    </form>
    </div>
</div>


        <div class="line"></div>

        

<div id="disqus_thread"></div>

<script type="text/javascript">

    var disqus_shortname = 'blogvitorbritto'; // shortname

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

<noscript>Por favor, habilite o JavaScript para ver os <a href="http://disqus.com/?ref_noscript">comentários</a> deste artigo.</noscript>



    </div>

        <div class="line"></div>

        <div class="row">
            <footer class="footer">
                    <p class="footer-text">Desenvolvido por Vitor Britto. Feito com <a href="http://jekyllrb.com/" title="Jekyll" target="_blank">Jekyll</a>, <i class="icon-coffee"></i> e <i class="icon-heart"></i>.</p>
            </footer>
        </div>

    </div>

    <!-- Scripts -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="http://www.vitorbritto.com.br/blog/assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src='http://www.vitorbritto.com.br/blog/assets/js/app.min.js'></script>

    <!-- Google Analytics -->
    <script>
    var _gaq=[['_setAccount','UA-12808940-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>

